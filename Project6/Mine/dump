import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Scanner;

/**
 * Created by Sai Nikhilesh Reddy at 16:08 , on 22-12-2019.
 */
public class A_Line {
    public static String mainKey(Scanner data, String key) throws FileNotFoundException {
        int countHidden = 0;
        int slashHidden = 0;
        String line, lineValue;
        Database database = new Database();

        while (data.hasNextLine()) {
            line = data.nextLine();
            char[] lineChar = line.toCharArray();

            if (!(lineChar.length < 2)) {
                for (int i = 0; i < lineChar.length - 1; i++) {
                    if (lineChar[i] == '/' && lineChar[i + 1] == '/') {
                        slashHidden = i;
                        break;
                    }
                }
            }

            if (!((line.substring(0, (slashHidden)).trim().isEmpty() && slashHidden != 0) || line.trim().isEmpty()
                    || (line.charAt(0) == '/' && line.charAt(1) == '/'))) {

                int endPosition = (slashHidden == 0) ? line.length() : slashHidden;
                String mainKey = line.substring(0, endPosition).trim();

                if (!database.checkSymbolKey(mainKey)) {
                    int positionOne = mainKey.indexOf('(');
                    int positionTwo = mainKey.indexOf(')');
                    if (positionOne >=0 && positionTwo>0){
                        String getLabel = mainKey.substring(positionOne+1,positionTwo).trim();
                        database.setSymbolKey(getLabel,countHidden);
                    }else{
                        countHidden++;
                    }
                }
            }
            slashHidden = 0;
        }

        char[] lineChar = key.toCharArray();

        if (!(lineChar.length < 2)) {
            for (int i = 0; i < lineChar.length - 1; i++) {
                if (lineChar[i] == '/' && lineChar[i + 1] == '/') {
                    slashHidden = i;
                    break;
                }
            }
        }

        if (key.charAt(0) == '@'){
            int endPosition = (slashHidden==0) ? key.length() : slashHidden;
            String shortString = key.substring(1,endPosition);
            System.out.println(shortString);
            if (database.checkSymbolKey(shortString)){
                System.out.println("symbol key :"+database.getSymbolValue(shortString));
            }else{

            }
        }


        return null;
    }

    public static void main(String[] args) throws FileNotFoundException {
        Scanner scan = new Scanner(new FileReader("data.asm"));
        System.out.println(mainKey(scan,"@2"));
    }

}
